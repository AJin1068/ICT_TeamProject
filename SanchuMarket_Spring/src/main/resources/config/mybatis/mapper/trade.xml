<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="trade">

	<!--금일 상품 거래량-->
	<select id="today_count" resultType="int">
	  select count(*) from trade where to_char(t_date,'dd') = to_char(sysdate, 'dd') and t_status = '판매완료'
	</select>
	
	<insert id="trade_insert" parameterType="vo.TradeVo">
		insert into trade values(
		#{p_idx},
		#{seller},
		#{buyer},
		#{t_status},
		sysdate
		)
	</insert>
	
	<update id="trade_update" parameterType="java.util.Map">
		update trade set t_status=#{p_status}, t_date=sysdate where p_idx=#{p_idx}
	</update>
	
</mapper>